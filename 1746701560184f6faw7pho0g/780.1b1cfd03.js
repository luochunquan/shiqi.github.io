"use strict";(self["webpackChunkcc_web_client"]=self["webpackChunkcc_web_client"]||[]).push([[780],{2780:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page sport_view"},[1==t.sportJumpGame?[e("betby")]:t._e(),2==t.sportJumpGame?[e("saba")]:t._e()],2)},a=[],n=i(95353),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comp betby"},[e("transition",{attrs:{name:"select-menu-fade",mode:"out-in"}},[t.betbyShow?e("div",{staticClass:"load_img",style:{left:!t.isApp&&t.leftMenu?"244px":0,right:!t.isApp&&t.rightMenu?"360px":0}},[e("img",{attrs:{src:t.loadIcon("common_loading",!1)}})]):t._e()]),e("div",{attrs:{id:"betby"}})],1)},r=[],c=i(61384),h=i(78749),m=i.n(h),u=i(81899),l=i(51483),d={data(){return{server:"",brand_id:"",themeName:"",lang:"",betbyToken:"",betbyShow:!0}},computed:{...(0,n.aH)("layout",["containerBox"]),...(0,n.aH)("base",["user","isApp","languageType"]),...(0,n.aH)("modal",["leftMenu","rightMenu"]),...(0,n.aH)("source",["maintains"]),...(0,n.L8)("base",["isTourist"]),topNavHeight(){return Number(l.A.top_navigation_height)},isMainten(){const t=this.maintains.find((t=>t.gid==c.T5))||{};return t}},watch:{rightMenu(t=!1){!this.isApp&&this.btInstance&&this.btInstance.updateOptions({betSlipOffsetRight:t?360:0})},isTourist:{async handler(){this.btInstance&&this.btInstance.kill(),this.betTimeout&&(clearTimeout(this.betTimeout),this.betTimeout=null),this.pageLoaderShow=null,this.betbyToken="",await this.closeGameDialog().catch((t=>t)),await this.execSlotGame().catch((t=>t)),this.betbyShow=!0,this.persistBTRenderer().then(this.renderView)},immediate:!0},isMainten:{handler(t={}){const{mtc_status:e=0,mtc_st_date:i=0,mtc_end_date:s=0}=t,a=this.$u.getTimeStamp(new Date,i),n=this.$u.getTimeStamp(new Date,s);if(e&&a&&!n){const t=this.$u.useTimestamp(i,"MM-dd HH:mm")||"",e=this.$u.useTimestamp(s,"MM-dd HH:mm")||"";m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"mainten",seat:"first",params:{title:this.$t("UI.Tips"),content:this.$t("UI_gameHintTip",{st_time:t,end_time:e}),submitText:this.$t("General.General_1")}}),this.exit(),this.$router.push({name:"menu"})}},deep:!0,immediate:!0}},beforeDestroy(){this.$store.commit("source/SET_IS_TO_GAME",!1),this.exit()},methods:{loadIcon:t=>(0,u.A)(t,!1),execSlotGame(){return new Promise((async(t,e)=>{const i={token:this.user.token,gid:c.T5,language:this.languageType,type:this.isApp?100:101,direction:1};this.$store.commit("source/SET_IS_ROTATE",!0);const s=await this.$store.dispatch("sport/upperDivision",i).catch((t=>t));if(this.$store.commit("source/SET_IS_ROTATE",!1),"cancal"==s)return e("cancel");const{server:a="",brand_id:n="",themeName:o="",lang:r="",token:h=""}=s;this.server=a,this.brand_id=n,this.themeName=o,this.lang=r,this.betbyToken=h,t("ok")}))},closeGameDialog(t){return new Promise((async(e,i)=>{this.$store.commit("source/SET_IS_ROTATE",!0);const s={token:this.user.token,language:this.languageType},a=await this.$store.dispatch("sport/lowerDivision",s).catch((t=>t));if("cancel"==a)return i("cancel");e("ok"),setTimeout((()=>{t&&t(),Promise.all([this.$store.dispatch("base/showRedDotReceivedFun",{version:2,event:"clean_bet",language:this.languageType,token:this.user.token}),this.$store.dispatch("base/showRedDotReceivedFun",{version:2,event:"vip_cash_gift",language:this.languageType,token:this.user.token}),this.$store.dispatch("base/refreshAccount")]).then((()=>{this.$store.commit("source/SET_IS_ROTATE",!1),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"relegation"}),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"vipReward"}),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"betReward"})}))}),2e3)}))},persistBTRenderer(){return new Promise((t=>{if(window.BTRenderer)return t();const e=document.createElement("script");e.src=`${this.server}bt-renderer.min.js`,e.addEventListener("load",(function(){t()})),document.body.append(e)}))},renderView(t=""){const e=this;this.btInstance=(new BTRenderer).initialize({brand_id:this.brand_id,token:t||this.betbyToken,themeName:this.themeName,lang:this.lang,stickyTop:this.topNavHeight||68,target:document.getElementById("betby"),betslipZIndex:99,betSlipOffsetTop:64,betSlipOffsetRight:this.isApp?0:this.rightMenu?360:0,betSlipOffsetBottom:this.isApp?55:0,onRouteChange:function(){let t=document.getElementsByClassName("m_content")[0];t&&t.scrollIntoView()},onLogin:function(){e.$store.dispatch("modal/setLoginRegistShow")},onRegister:function(){e.$store.dispatch("modal/setLoginRegistShow",{tab:!1})},onTokenExpired:async()=>(await e.closeGameDialog().catch((t=>t)),await e.execSlotGame().catch((t=>t)),Promise.resolve(e.betbyToken)),onSessionRefresh:async()=>{e.btInstance&&(e.btInstance&&e.btInstance.kill(),await e.closeGameDialog().catch((t=>t)),await e.execSlotGame().catch((t=>t)),e.betbyShow=!0,e.persistBTRenderer().then(e.renderView))},onBetSlipStateChange:function(){},onRecharge:()=>{e.isTourist?e.$store.dispatch("modal/setLoginRegistShow"):e.$store.dispatch("modal/setDepositWithdrawShow")}}),this.betTimeoutFun()},betTimeoutFun(){if(this.betTimeout&&(clearTimeout(this.betTimeout),this.betTimeout=null),!this.betbyShow)return;const t=document.getElementById("bt-inner-page")?.shadowRoot?.querySelector("div[data-editor-id='pageLoader']"),e=!!t;this.betTimeout=setTimeout((()=>{this.pageLoaderShow&&!e?this.betbyShow=!1:(this.pageLoaderShow=e,this.betTimeoutFun())}),1e3)},exit(){this.btInstance&&this.btInstance.kill(),this.closeGameDialog((()=>{m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"remind",seat:"first"})})),this.betTimeout&&(clearTimeout(this.betTimeout),this.betTimeout=null),this.pageLoaderShow=null}}},_=d,p=i(845),g=(0,p.A)(_,o,r,!1,null,"d32bfbba",null),b=g.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comp saba"},[e("transition",{attrs:{name:"select-menu-fade",mode:"out-in"}},[t.loading?e("div",{staticClass:"load_img",style:{left:!t.isApp&&t.leftMenu?"244px":0,right:!t.isApp&&t.rightMenu?"360px":0}},[e("img",{attrs:{src:t.loadIcon("common_loading",!1)}})]):t._e()]),t.iframe_src?[e("iframe",{staticClass:"iframe_box",attrs:{src:t.iframe_src,frameborder:"0"}})]:t._e()],2)},w=[],f=i(74398),A={data(){return{loading:!1,iframe_src:""}},computed:{...(0,n.aH)("layout",["containerBox"]),...(0,n.aH)("base",["user","isApp","languageType","systemConfig"]),...(0,n.aH)("modal",["leftMenu","rightMenu"]),...(0,n.aH)("source",["maintains"]),...(0,n.L8)("base",["isTourist"]),isMainten(){const t=this.maintains.find((t=>t.gid==c.q6))||{};return t}},watch:{isTourist:{async handler(){this.iframe_src="",this.loading=!0,await this.lowerDivision().catch((t=>t)),await this.upperDivision().catch((t=>t)),this.loading=!1},immediate:!0},isMainten:{handler(t={}){const{mtc_status:e=0,mtc_st_date:i=0,mtc_end_date:s=0}=t,a=this.$u.getTimeStamp(new Date,i),n=this.$u.getTimeStamp(new Date,s);if(e&&a&&!n){const t=this.$u.useTimestamp(i,"MM-dd HH:mm")||"",e=this.$u.useTimestamp(s,"MM-dd HH:mm")||"";m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"mainten",seat:"first",params:{title:this.$t("UI.Tips"),content:this.$t("UI_gameHintTip",{st_time:t,end_time:e}),submitText:this.$t("General.General_1")}}),this.exit(),this.$router.push({name:"menu"})}},deep:!0,immediate:!0}},beforeDestroy(){this.$store.commit("source/SET_IS_TO_GAME",!1),this.exit()},methods:{loadIcon:t=>(0,u.A)(t,!1),async upperDivision(){const t={token:this.user.token,gid:c.q6,language:this.languageType,direction:1,type:this.isApp?100:101},e=await(0,f.qH)(t).catch((t=>t));if(!e||0!=e.code)return this.$pop.message().show({content:e&&e.msg});const i=e.data&&this.$u.lodash.isObject(e.data)?e.data:{};this.iframe_src=i.base_url},lowerDivision(t){return new Promise((async(e,i)=>{this.$store.commit("source/SET_IS_ROTATE",!0);const s={token:this.user.token,language:this.languageType},a=await(0,f.pV)(s).catch((t=>t));if(!a||0!=a.code)return this.$pop.message().show({content:a&&a.msg}),i("cancel");e("ok"),setTimeout((()=>{t&&t(),Promise.all([this.$store.dispatch("base/showRedDotReceivedFun",{version:2,event:"clean_bet",language:this.languageType,token:this.user.token}),this.$store.dispatch("base/showRedDotReceivedFun",{version:2,event:"vip_cash_gift",language:this.languageType,token:this.user.token}),this.$store.dispatch("base/refreshAccount")]).then((()=>{this.$store.commit("source/SET_IS_ROTATE",!1),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"relegation"}),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"vipReward"}),m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"betReward"})}))}),2e3)}))},exit(){this.lowerDivision((()=>{m().publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY,{key:"remind",seat:"first"})}))}}},y=A,k=(0,p.A)(y,T,w,!1,null,"9367b36a",null),$=k.exports,v=i(82503),S=i(58725),E=i(19075),R=i(57253),G=i(63334),M=i(40026),D={components:{betby:b,saba:$},mixins:[M.A],async beforeRouteEnter(t,e,i){const{systemConfig:s={},user:a={},languageType:n=""}=R.A.state.base,{sport_jump_game:o=1}=s,r={token:a.token,language:n,gid:1==o?c.T5:c.q6},h=await(0,v.LZ)(r).catch((t=>t));if(!h||0!=h.code)return i(!0);const u=h.data&&S.CM.isObject(h.data)?h.data:{},{mtc_status:l=0,mtc_st_date:d=0,mtc_end_date:_=0}=u,p=(0,E.JY)(new Date,d),g=(0,E.JY)(new Date,_);if(l&&p&&!g){const t=(0,E.wH)(d,"MM-dd HH:mm")||"",s=(0,E.wH)(_,"MM-dd HH:mm")||"";let a=(0,S.km)((0,G.$t)("UI_gameHintTip"),"{st_time}",t);return a=(0,S.km)(a,"{end_time}",s),m().publish(R.A.state?.dialog?.DUALOG_MANAGER_KEY,{key:"mainten",seat:"first",params:{title:(0,G.$t)("UI.Tips"),content:a,submitText:(0,G.$t)("General.General_1")}}),e.name?i(!1):i("/menu")}return R.A.commit("source/SET_IS_TO_GAME",!0),i(!0)},data(){return{}},computed:{...(0,n.aH)("base",["isApp","systemConfig"]),sportJumpGame(){const{sport_jump_game:t=1}=this.systemConfig;return t}}},I=D,x=(0,p.A)(I,s,a,!1,null,"af21be4e",null),H=x.exports},51483:function(t,e){e.A={top_navigation_height:"60px",top_navigation_btn_height:"36px",m_icon_pc_dreawer_icon_size:"32",bank_account_btn_width:"130px",bank_account_refresh_icon_size:"14",bank_account_refresh_icon_color:"t_white",account_menu_prolife_btn_width:"36px",account_menu_mail_btn_width:"36px",account_menu_list_item_icon_size:"24",account_menu_btn_size:"22",account_menu_width:"200",account_menu_zindex:"1110",nav_button_icon_size:"24",nav_android_down_icon_size:"20",nav_android_down_icon_color:"#838a9b"}}}]);