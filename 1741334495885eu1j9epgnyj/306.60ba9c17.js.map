{"version":3,"file":"1741334495885eu1j9epgnyj/306.60ba9c17.js","mappings":"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","sources":["webpack://cc_web_client/./modules/regression/sign-in.vue?06be","webpack://cc_web_client/modules/regression/sign-in.vue","webpack://cc_web_client/./modules/regression/sign-in.vue?4f12","webpack://cc_web_client/./modules/regression/sign-in.vue"],"sourcesContent":["import { VContainer } from 'vuetify/lib/components/VGrid';\n\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c(VContainer,{staticClass:\"container_regression_sign\",attrs:{\"app\":\"\"}},[_c('div',{staticClass:\"regression_sign_box\"},[_c('div',{staticClass:\"regression_sign_title\"},[_c('div',{staticClass:\"regression_sign_title_img\"},[_c('img',{attrs:{\"src\":_vm.loadIcon(`day_title_${_vm.languageType}`, false)}})])]),_c('div',{staticClass:\"regression_sign_chest\"},_vm._l((_vm.signList),function(item,i){return _c('div',{key:i,staticClass:\"chest_box_item\",on:{\"click\":function($event){return _vm.onReceiveChest({ ...item, day_index: i + 1 })}}},[_c('img',{staticClass:\"chest_box_item_img\",attrs:{\"src\":_vm.loadIcon(_vm.chestIcon(item.is_finish), false),\"alt\":\"\"}}),_c('div',{staticClass:\"chest_box_item_gold\"},[_c('img',{staticClass:\"chest_box_item_gold_img\",attrs:{\"src\":_vm.loadIcon('day_gold', false),\"alt\":\"\"}}),_c('span',{staticClass:\"chest_box_item_gold_text\"},[_vm._v(_vm._s(`${_vm.currencySymbol}${item.gold}`))])])])}),0),_c('div',{staticClass:\"regression_sign_content\"},[_c('div',{staticClass:\"text_box\",domProps:{\"innerHTML\":_vm._s(_vm.contentText)}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container app class=\"container_regression_sign\">\r\n    <div class=\"regression_sign_box\">\r\n      <div class=\"regression_sign_title\">\r\n        <div class=\"regression_sign_title_img\">\r\n          <img :src=\"loadIcon(`day_title_${languageType}`, false)\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"regression_sign_chest\">\r\n        <div\r\n          class=\"chest_box_item\"\r\n          v-for=\"(item, i) in signList\"\r\n          :key=\"i\"\r\n          @click=\"onReceiveChest({ ...item, day_index: i + 1 })\"\r\n        >\r\n          <img class=\"chest_box_item_img\" :src=\"loadIcon(chestIcon(item.is_finish), false)\" alt=\"\" />\r\n          <div class=\"chest_box_item_gold\">\r\n            <img class=\"chest_box_item_gold_img\" :src=\"loadIcon('day_gold', false)\" alt=\"\" />\r\n            <span class=\"chest_box_item_gold_text\">{{ `${currencySymbol}${item.gold}` }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"regression_sign_content\">\r\n        <div class=\"text_box\" v-html=\"contentText\"></div>\r\n      </div>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { getEeplace } from '@/utils/helper'\r\nimport loadIcon from '@/assets/icons'\r\nimport PublishSubscribe from 'publish-subscribe-js'\r\nimport { getRegressionSingleList, getRegressionSingleReceiveGold } from '@/api/modules/regression.js'\r\n\r\nexport default {\r\n  name: 'regressionSignIn',\r\n  data() {\r\n    return {\r\n      info: {} // 数据\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('switchState', ['currencyShow']),\r\n    ...mapState('base', ['isApp', 'systemConfig', 'languageType', 'user', 'showRedDot']),\r\n    // 金额标识\r\n    currencySymbol() {\r\n      return this.currencyShow ? this.systemConfig.currency_symbol : ''\r\n    },\r\n    // 签到列表\r\n    signList() {\r\n      const { action_detail = [] } = this.info\r\n      return action_detail\r\n    },\r\n    // 处理富文本\r\n    contentText() {\r\n      const { content = '' } = this.info\r\n      return content ? getEeplace(content) : ''\r\n    }\r\n  },\r\n  created() {\r\n    window.removeEventListener('resize', this.initNode)\r\n    window.addEventListener('resize', this.initNode)\r\n\r\n    this.initNode()\r\n    this.getInfo()\r\n  },\r\n  methods: {\r\n    loadIcon: key => loadIcon(key, false),\r\n    // 初始化节点,用于加载图片高度,防止图片加载慢导致页面闪烁\r\n    initNode() {\r\n      this.$nextTick(() => {\r\n        const titleImg = document.querySelectorAll('.regression_sign_title_img')[0]\r\n        let titleImg_h = 0\r\n        let chestImg_h = 0\r\n\r\n        if (titleImg) {\r\n          const { width = 0 } = titleImg.getBoundingClientRect() || {}\r\n          titleImg_h = parseInt((138 * width) / 620)\r\n        }\r\n        const chestImgBox = document.querySelectorAll('.regression_sign_chest')[0]\r\n        if (chestImgBox) {\r\n          const { width = 0 } = chestImgBox.getBoundingClientRect() || {}\r\n          chestImg_h = parseInt(width * 0.25)\r\n        }\r\n        const regressionSignBox = document.querySelectorAll('.regression_sign_box')[0]\r\n        if (regressionSignBox) {\r\n          regressionSignBox.style.setProperty('--title_img_h', `${titleImg_h}px`)\r\n          regressionSignBox.style.setProperty('--chest_img_h', `${chestImg_h}px`)\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * 宝箱icon\r\n     * 0未完成不可领取，1完成可领取，2完成并领取\r\n     */\r\n    chestIcon(icon = 0) {\r\n      return {\r\n        0: 'box_lock',\r\n        1: 'box_active',\r\n        2: 'box_linqu'\r\n      }[icon]\r\n    },\r\n    // 获取签到数据\r\n    async getInfo() {\r\n      const params = {\r\n        token: this.user?.token,\r\n        language: this.languageType\r\n      }\r\n\r\n      const res = await getRegressionSingleList(params).catch(e => e)\r\n      if (!res || res.code != 0) return\r\n\r\n      const resData = res && res.data && Object.prototype.toString.call(res.data) == '[object Object]' ? res.data : {}\r\n      this.info = resData\r\n    },\r\n    // 领取宝箱\r\n    async onReceiveChest(item = {}) {\r\n      const { back_task_join_id = 0 } = this.info\r\n      // day_index:宝箱索引\r\n      // is_finish:宝箱状态 0未完成不可领取，1完成可领取，2完成并领取\r\n      const { day_index = 1, is_finish = 0 } = item\r\n      if (is_finish != 1) return\r\n\r\n      const params = {\r\n        day_index,\r\n        token: this.user?.token,\r\n        language: this.languageType,\r\n        back_task_join_id\r\n      }\r\n      const res = await getRegressionSingleReceiveGold(params).catch(e => e)\r\n      if (!res || res.code != 0) return\r\n      const resData = res && res.data && Object.prototype.toString.call(res.data) == '[object Object]' ? res.data : {}\r\n\r\n      // 提现成功弹窗 插入弹窗序列\r\n      PublishSubscribe.publish(this.$store.state?.dialog?.DUALOG_MANAGER_KEY, {\r\n        key: 'deposit',\r\n        seat: 'first',\r\n        params: {\r\n          title: this.$t('UI_Code_Bonus'),\r\n          value: resData.gold || 0\r\n        }\r\n      })\r\n\r\n      // 更新红点\r\n      this.$store.dispatch('base/showRedDotReceivedFun', {\r\n        language: this.languageType,\r\n        token: this.user?.token,\r\n        version: 2,\r\n        event: 'weekcard_sign'\r\n      })\r\n      this.getInfo()\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.initNode)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@style/views/regression.modules.scss';\r\n\r\n// 针对移动端样式\r\n.container_regression_sign {\r\n  width: $container_regression_sign_app_width;\r\n  padding: $container_regression_sign_app_padding;\r\n  user-select: none;\r\n  .regression_sign_box {\r\n    width: $regression_sign_box_app_width;\r\n    padding: $regression_sign_box_app_padding;\r\n    background: $regression_sign_box_app_bg;\r\n    @include setBox(column, center, center);\r\n    .regression_sign_title {\r\n      width: $regression_sign_title_app_width;\r\n      padding: $regression_sign_title_app_padding;\r\n      @include setBox(row, center, center);\r\n      .regression_sign_title_img {\r\n        width: $regression_sign_title_img_app_width;\r\n        min-height: var(--title_img_h);\r\n        img {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n    .regression_sign_chest {\r\n      width: $regression_sign_chest_app_width;\r\n      margin: $regression_sign_chest_app_margin;\r\n      @include setBox(row, center, center, wrap);\r\n      .chest_box_item {\r\n        width: $regression_signchest_box_item_app_width;\r\n        margin: $regression_signchest_box_item_app_margin;\r\n        cursor: pointer;\r\n        @include setBox(column, center, center);\r\n        .chest_box_item_img {\r\n          width: $regression_signchest_box_item_img_app_width;\r\n          min-height: var(--chest_img_h);\r\n        }\r\n        .chest_box_item_gold {\r\n          padding: $regression_signchest_box_item_gold_app_padding;\r\n          background: $regression_signchest_box_item_gold_app_bg;\r\n          border-radius: $regression_signchest_box_item_gold_app_radius;\r\n          @include setBox(row, center, center);\r\n          .chest_box_item_gold_img {\r\n            width: $regression_signchest_box_item_gold_img_app_width;\r\n            height: $regression_signchest_box_item_gold_img_app_height;\r\n          }\r\n          .chest_box_item_gold_text {\r\n            margin: $regression_signchest_box_item_gold_text_app_margin;\r\n            font-size: $regression_signchest_box_item_gold_text_app_size;\r\n            font-weight: $regression_signchest_box_item_gold_text_app_weight;\r\n            color: $regression_signchest_box_item_gold_text_app_color;\r\n            line-height: $regression_signchest_box_item_gold_text_app_line;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .regression_sign_content {\r\n      width: $regression_sign_content_app_width;\r\n      min-height: $regression_sign_content_app_min_height;\r\n      margin: $regression_sign_content_app_margin;\r\n      padding: $regression_sign_content_app_padding;\r\n      border: $regression_sign_content_app_border;\r\n      border-radius: $regression_sign_content_app_radius;\r\n      background: $regression_sign_content_app_bg;\r\n    }\r\n  }\r\n}\r\n// 针对pc样式\r\n@include breakpoint-only-up() {\r\n  .container_regression_sign {\r\n    .regression_sign_box {\r\n      padding: $regression_sign_box_pc_padding;\r\n      background: $regression_sign_box_pc_bg;\r\n      .regression_sign_title {\r\n        padding: $regression_sign_box_title_pc_padding;\r\n        .regression_sign_title_img {\r\n          width: $regression_sign_box_title_img_pc_width;\r\n        }\r\n      }\r\n      .regression_sign_chest {\r\n        width: $regression_sign_chest_pc_width;\r\n        margin: $regression_sign_chest_pc_margin;\r\n        .chest_box_item {\r\n          .chest_box_item_gold {\r\n            padding: $regression_sign_chest_item_gold_pc_padding;\r\n            border-radius: $regression_sign_chest_item_gold_pc_radius;\r\n            .chest_box_item_gold_img {\r\n              width: $regression_sign_chest_item_gold_img_pc_width;\r\n              height: $regression_sign_chest_item_gold_img_pc_height;\r\n            }\r\n            .chest_box_item_gold_text {\r\n              margin: $regression_sign_chest_item_gold_text_pc_margin;\r\n              font-size: $regression_sign_chest_item_gold_text_pc_size;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .regression_sign_content {\r\n        width: $regression_sign_content_pc_width;\r\n        min-height: $regression_sign_content_pc_min_height;\r\n        margin: $regression_sign_content_pc_margin;\r\n        padding: $regression_sign_content_pc_padding;\r\n        border: $regression_sign_content_pc_border;\r\n        background: $regression_sign_content_pc_bg;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sign-in.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sign-in.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./sign-in.vue?vue&type=template&id=4cf536db&scoped=true\"\nimport script from \"./sign-in.vue?vue&type=script&lang=js\"\nexport * from \"./sign-in.vue?vue&type=script&lang=js\"\nimport style0 from \"./sign-in.vue?vue&type=style&index=0&id=4cf536db&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cf536db\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","VContainer","staticClass","attrs","loadIcon","languageType","_l","item","i","key","on","$event","onReceiveChest","day_index","chestIcon","is_finish","_v","_s","currencySymbol","gold","domProps","contentText","staticRenderFns","name","data","info","computed","currencyShow","systemConfig","currency_symbol","signList","action_detail","content","created","window","removeEventListener","initNode","addEventListener","getInfo","methods","$nextTick","titleImg","document","querySelectorAll","titleImg_h","chestImg_h","width","getBoundingClientRect","parseInt","chestImgBox","regressionSignBox","style","setProperty","icon","params","token","user","language","res","catch","e","code","resData","Object","prototype","toString","call","back_task_join_id","$store","state","dialog","DUALOG_MANAGER_KEY","seat","title","$t","value","dispatch","version","event","beforeDestroy","component"],"sourceRoot":""}